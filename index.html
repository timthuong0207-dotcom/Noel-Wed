<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <title>Gi√°ng Sinh T∆∞∆°ng T√°c ‚Äî B·∫£n ƒë∆°n gi·∫£n ch·∫°y ch·∫Øc</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        /* N·ªÅn + √°nh s√°ng qu√©t */
        body {
            margin: 0;
            font-family: 'Courier New', monospace;
            background: linear-gradient(to bottom, #ffcccc 0%, #d94c4c 40%, #990000 100%);
            color: #fff;
            text-align: center;
            overflow: hidden;
        }

        h2 {
            margin: 16px 0;
            font-size: 28px;
            background: linear-gradient(90deg, #fff, #ffd54f, #ff6666, #66ccff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: colorShift 5s infinite alternate ease-in-out;
        }

        @keyframes colorShift {
            0% {
                background-position: 0% 50%
            }

            100% {
                background-position: 100% 50%
            }
        }

        .shine-top,
        .shine-bottom {
            position: fixed;
            left: 0;
            width: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .shine-top {
            top: 0;
            height: 50%;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0));
            animation: shineRight 8s linear infinite;
        }

        .shine-bottom {
            bottom: 0;
            height: 50%;
            background: linear-gradient(270deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0));
            animation: shineLeft 8s linear infinite;
        }

        @keyframes shineRight {
            0% {
                transform: translateX(100%)
            }

            100% {
                transform: translateX(-100%)
            }
        }

        @keyframes shineLeft {
            0% {
                transform: translateX(-100%)
            }

            100% {
                transform: translateX(100%)
            }
        }

        /* Khung c·∫£nh */
        .scene {
            position: relative;
            width: min(460px, 92vw);
            height: 600px;
            margin: 0 auto;
            z-index: 1;
        }

        /* V√πng c√¢y v√† th√¢n */
        .tree-area {
            position: absolute;
            /* ƒë·ªÉ dot absolute b√°m v√†o ƒë√¢y */
            bottom: 140px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 70%;
            outline: 0;
            /* DEBUG: b·∫≠t n·∫øu c·∫ßn: 1px dashed rgba(255,255,255,0.2) */
        }

        .trunk {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 48px;
            height: 76px;
            background: #8b5a2b;
            border-radius: 8px;
            z-index: 2;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.35);
        }

        /* ƒê·ªëm xanh l√° */
        .dot {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, #ccffcc 0%, #2bd92b 40%, #0f9d0f 70%, #0a6f0a 100%);
            box-shadow: 0 0 6px rgba(0, 255, 0, 0.8), 0 0 12px rgba(0, 255, 0, 0.5);
            opacity: 0;
            transform: scale(0.6);
            animation: dotPop 0.35s ease forwards;
        }

        @keyframes dotPop {
            to {
                opacity: 1;
                transform: scale(1)
            }
        }

        /* Sao v√†ng */
        .fly-star {
            position: absolute;
            left: 50%;
            top: -50px;
            transform: translateX(-50%);
            font-size: 32px;
            color: #ffd700;
            opacity: 0;
            z-index: 3;
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.9), 0 0 16px rgba(255, 215, 0, 0.6);
        }

        .fly-star.twinkle {
            animation: twinkle 1.1s infinite alternate;
        }

        @keyframes twinkle {
            from {
                transform: translateX(-50%) scale(0.95)
            }

            to {
                transform: translateX(-50%) scale(1.05)
            }
        }

        /* Qu√† hai b√™n */
        .gifts {
            position: absolute;
            bottom: 28px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            justify-content: space-between;
            width: min(400px, 90%);
            z-index: 2;
        }

        .gift {
            width: 128px;
            height: 106px;
            position: relative;
            animation: sway 2.1s ease-in-out infinite alternate;
            transform-origin: 50% 100%;
            cursor: pointer;
        }

        @keyframes sway {
            from {
                transform: rotate(-4deg)
            }

            to {
                transform: rotate(4deg)
            }
        }

        .gift .box {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.28);
        }

        .gift.left .box {
            background: linear-gradient(#ff6b6b, #c44545)
        }

        .gift.right .box {
            background: linear-gradient(#6bc2ff, #4577c4)
        }

        .gift .lid {
            position: absolute;
            top: -18px;
            left: 0;
            width: 100%;
            height: 24px;
            border-radius: 8px 8px 0 0;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2)
        }

        .gift .ribbon {
            position: absolute;
            top: -18px;
            left: 50%;
            width: 12px;
            height: 124px;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.65);
            border-radius: 8px
        }

        /* Prompt ·ªü gi·ªØa th√¢n c√¢y (t·ªça ƒë·ªô set b·∫±ng JS) */
        .prompt {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            z-index: 4;
            text-align: center;
        }

        .btn {
            display: inline-block;
            margin: 6px 8px;
            padding: 10px 18px;
            font-size: 16px;
            color: #003366;
            background: #e6f3ff;
            border: 2px solid #3399ff;
            border-radius: 10px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0));
            transform: translateY(-100%);
            animation: snowCover 1.2s ease forwards;
            pointer-events: none
        }

        @keyframes snowCover {
            to {
                transform: translateY(0)
            }
        }

        .btn::after {
            content: "‚ú©";
            position: absolute;
            top: 6px;
            right: 8px;
            font-size: 14px;
            color: #ffd700;
            text-shadow: 0 0 6px rgba(255, 215, 0, 0.8);
            animation: starBlink 1.2s ease infinite alternate
        }

        .btn .corner {
            position: absolute;
            top: 6px;
            left: 8px;
            font-size: 14px;
            color: #ffd700;
            text-shadow: 0 0 6px rgba(255, 215, 0, 0.8);
            animation: starBlink 1.2s ease infinite alternate;
            pointer-events: none
        }

        @keyframes starBlink {
            from {
                opacity: .7;
                transform: scale(0.95)
            }

            to {
                opacity: 1;
                transform: scale(1.05)
            }
        }

        /* Card/khung t∆∞∆°ng t√°c ‚Äî ƒë√® l√™n c√¢y */
        .overlay-card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            width: 84%;
            max-width: 420px;
            padding: 16px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.95);
            color: #00264d;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
            z-index: 5;
            text-align: center;
        }

        /* Tuy·∫øt r∆°i */
        .snowflake {
            position: fixed;
            top: -10px;
            color: #fff;
            opacity: 0.9;
            z-index: 3;
            pointer-events: none;
            filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.15));
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% {
                transform: translateY(-10px)
            }

            100% {
                transform: translateY(100vh)
            }
        }
    </style>
</head>

<body>
    <div class="shine-top"></div>
    <div class="shine-bottom"></div>

    <h2>Gi√°ng Sinh ·∫•m √°p üéÑ‚ùÑÔ∏è</h2>

    <div class="scene" id="scene">
        <div class="tree-area" id="treeArea"></div>
        <div class="trunk" id="trunk"></div>
        <div class="fly-star" id="flyStar">‚òÖ</div>

        <div class="gifts" id="gifts">
            <div class="gift left">
                <div class="lid"></div>
                <div class="box"></div>
                <div class="ribbon"></div>
            </div>
            <div class="gift right">
                <div class="lid"></div>
                <div class="box"></div>
                <div class="ribbon"></div>
            </div>
        </div>

        <div class="prompt" id="prompt">
            <button class="btn" id="btnYes"><span class="corner">‚ú©</span>Nh·∫≠n qu√†</button>
            <button class="btn" id="btnNo"><span class="corner">‚ú©</span>Kh√¥ng nh·∫≠n qu√†</button>
        </div>

        <!-- Overlay: h·ªèi tr√°i/ph·∫£i -->
        <div class="overlay-card" id="chooseSide">
            <h3 style="margin:0 0 8px 0;color:#001f3f;">B·∫°n mu·ªën nh·∫≠n qu√† b√™n tr√°i hay b√™n ph·∫£i?</h3>
            <button class="btn" id="btnLeft"><span class="corner">‚ú©</span>B√™n tr√°i</button>
            <button class="btn" id="btnRight"><span class="corner">‚ú©</span>B√™n ph·∫£i</button>
        </div>

        <!-- Overlay: thi·ªáp c·ªë ƒë·ªãnh (ph·∫£i) -->
        <div class="overlay-card" id="cardRight">
            <h3 style="margin:0 0 8px 0;color:#001f3f;">Thi·ªáp Gi√°ng Sinh</h3>
            <p>Ch√∫c b·∫°n Gi√°ng Sinh an l√†nh, ·∫•m √°p v√† nh·ªØng l·ªùi ∆∞·ªõc c·ªßa b·∫°n s·∫Ω th√†nh hi·ªán th·ª±c.</p>
            <button class="btn" id="btnThanks" style="margin-top:10px;"><span class="corner">‚ú©</span>C·∫£m ∆°n</button>
        </div>

        <!-- Overlay: nh·∫≠p ƒëi·ªÅu ∆∞·ªõc (tr√°i) -->
        <div class="overlay-card" id="wishArea">
            <h3 style="margin:0 0 8px 0;color:#001f3f;">Gi√°ng Sinh n√†y m√¨nh mong ƒëi·ªÅu ∆∞·ªõc c·ªßa b·∫°n s·∫Ω th√†nh hi·ªán th·ª±c
                nha.</h3>
            <label for="wishInput" style="display:block;text-align:left;font-weight:bold;">ƒêi·ªÅu ∆∞·ªõc ƒë√™m Gi√°ng
                Sinh</label>
            <input type="text" id="wishInput" placeholder="Vi·∫øt ƒëi·ªÅu ∆∞·ªõc..."
                style="width:100%;padding:10px;border-radius:10px;border:2px solid #3399ff;color:#003366;background:#e6f3ff;" />
            <p style="font-size:13px;opacity:.85;margin:6px 0 10px 0;">G·ª≠i xong s·∫Ω hi·ªán h·ªôp qu√† b√≠ ·∫©n, b·∫•m v√†o ƒë·ªÉ xem
                thi·ªáp ch·ª©a ƒëi·ªÅu ∆∞·ªõc.</p>
            <button class="btn" id="btnSubmitWish"><span class="corner">‚ú©</span>G·ª≠i ƒëi·ªÅu ∆∞·ªõc</button>
        </div>

        <!-- Overlay: h·ªôp qu√† v√† thi·ªáp ƒëi·ªÅu ∆∞·ªõc -->
        <div class="overlay-card" id="finalGift" style="padding:0;background:transparent;box-shadow:none;">
            <div class="gift right" id="clickGift" style="margin:0 auto;">
                <div class="lid"></div>
                <div class="box"></div>
                <div class="ribbon"></div>
            </div>
            <div class="overlay-card" id="wishCard"
                style="position:relative;transform:none;left:auto;top:auto;margin-top:12px;display:none;">
                <h3 style="margin:0 0 8px 0;color:#001f3f;">Thi·ªáp Gi√°ng Sinh</h3>
                <p id="wishText"></p>
                <p style="margin-top:8px;">M√¨nh mong ƒëi·ªÅu ∆∞·ªõc c·ªßa b·∫°n s·∫Ω th√†nh hi·ªán th·ª±c.</p>
            </div>
        </div>
    </div>

    <script>
        // 1) Tuy·∫øt r∆°i
        (function makeSnow(count = 50) {
            for (let i = 0; i < count; i++) {
                const s = document.createElement('div');
                s.className = 'snowflake';
                s.textContent = Math.random() < 0.18 ? '‚ú©' : '‚ùÑ';
                s.style.left = Math.random() * window.innerWidth + 'px';
                s.style.fontSize = (10 + Math.random() * 16) + 'px';
                s.style.animationDuration = (6 + Math.random() * 6) + 's';
                s.style.animationDelay = (Math.random() * 4) + 's';
                document.body.appendChild(s);
            }
        })();

        const scene = document.getElementById('scene');
        const treeArea = document.getElementById('treeArea');
        const flyStar = document.getElementById('flyStar');
        const gifts = document.getElementById('gifts');
        const prompt = document.getElementById('prompt');

        const chooseSide = document.getElementById('chooseSide');
        const cardRight = document.getElementById('cardRight');
        const btnThanks = document.getElementById('btnThanks');
        const wishArea = document.getElementById('wishArea');
        const finalGift = document.getElementById('finalGift');
        const wishCard = document.getElementById('wishCard');
        const wishText = document.getElementById('wishText');

        const btnYes = document.getElementById('btnYes');
        const btnNo = document.getElementById('btnNo');
        const btnLeft = document.getElementById('btnLeft');
        const btnRight = document.getElementById('btnRight');
        const btnSubmitWish = document.getElementById('btnSubmitWish');
        const clickGift = document.getElementById('clickGift');

        // 2) Tam gi√°c c√¢n: ƒë·ªânh tr√™n, ƒë√°y d∆∞·ªõi
        function insideTriangle(x, y, w, h) {
            const halfWidthAtY = (w / 2) * (y / h);
            const cx = w / 2;
            return (x >= cx - halfWidthAtY) && (x <= cx + halfWidthAtY);
        }

        // 3) X√¢y c√¢y b·∫±ng ƒë·ªëm
        async function buildTreeDots() {
            const w = treeArea.clientWidth;
            const h = treeArea.clientHeight;
            const totalDots = 280;
            const stepDelay = 16;
            const biasBottom = 0.85;

            console.log('B·∫Øt ƒë·∫ßu x√¢y c√¢y...');
            for (let i = 0; i < totalDots; i++) {
                let y = Math.pow(Math.random(), 1 / biasBottom) * h;
                let x, tries = 0;
                do {
                    x = Math.random() * w;
                    tries++;
                    if (tries > 60) break;
                } while (!insideTriangle(x, y, w, h));
                const dot = document.createElement('div');
                dot.className = 'dot';
                dot.style.left = x + 'px';
                dot.style.top = y + 'px';
                treeArea.appendChild(dot);
                if (i % 50 === 0) console.log('ƒê·ªëm', i, '/', totalDots);
                await new Promise(res => setTimeout(res, stepDelay));
            }
            console.log('X√¢y c√¢y xong.');
        }

        // 4) Sao bay l√™n ƒë√∫ng ƒë·ªânh c√¢y
        function flyStarToTop() {
            const taRect = treeArea.getBoundingClientRect();
            const sceneRect = scene.getBoundingClientRect();
            const targetLeft = (taRect.left - sceneRect.left) + (treeArea.clientWidth / 2);
            const targetTop = (taRect.top - sceneRect.top) - 2;

            flyStar.style.opacity = '1';
            flyStar.style.transition = 'left 1.6s ease, top 1.6s ease';
            flyStar.style.left = targetLeft + 'px';
            flyStar.style.top = targetTop + 'px';

            setTimeout(() => {
                flyStar.classList.add('twinkle');
                // Hi·ªán qu√†
                gifts.style.display = 'flex';
                // ƒê·∫∑t prompt gi·ªØa th√¢n c√¢y
                const midY = (taRect.top - sceneRect.top) + (treeArea.clientHeight * 0.55);
                prompt.style.top = midY + 'px';
                prompt.style.display = 'block';
                console.log('Sao l√™n ƒë·ªânh, qu√† & n√∫t ƒë√£ hi·ªán.');
            }, 1700);
        }

        // 5) Chu·ªói hi·ªÉn th·ªã
        (async function runScene() {
            await buildTreeDots();
            flyStarToTop();
        })();

        // 6) T∆∞∆°ng t√°c
        btnYes.addEventListener('click', () => {
            chooseSide.style.display = 'block';
        });
        btnNo.addEventListener('click', () => {
            chooseSide.style.display = 'none';
            cardRight.style.display = 'none';
            wishArea.style.display = 'none';
            finalGift.style.display = 'none';
        });
        btnRight.addEventListener('click', () => {
            cardRight.style.display = 'block';
            chooseSide.style.display = 'none';
        });
        btnThanks.addEventListener('click', () => {
            cardRight.style.display = 'none';
        });
        btnLeft.addEventListener('click', () => {
            wishArea.style.display = 'block';
            chooseSide.style.display = 'none';
        });
        btnSubmitWish.addEventListener('click', () => {
            const wish = document.getElementById('wishInput').value.trim();
            if (!wish) { alert('B·∫°n h√£y vi·∫øt ƒëi·ªÅu ∆∞·ªõc nh√©!'); return; }
            prompt.style.display = 'none';
            chooseSide.style.display = 'none';
            cardRight.style.display = 'none';
            wishArea.style.display = 'none';
            gifts.style.display = 'none';
            finalGift.style.display = 'block';
            wishText.textContent = wish;
        });
        clickGift.addEventListener('click', () => {
            wishCard.style.display = 'block';
        });

        // 7) Gi·ªØ sao ƒë√∫ng v·ªã tr√≠ n·∫øu resize khi ch∆∞a twinkle
        window.addEventListener('resize', () => {
            if (!flyStar.classList.contains('twinkle') && flyStar.style.opacity === '1') {
                flyStarToTop();
            }
        });
    </script>
</body>

</html>
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Noel c·ªßa An</title>
  <style>
    body {
      background: linear-gradient(to bottom, #001f3f, #0074D9);
      height: 100vh;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      color: white;
      font-family: sans-serif;
    }

    .tree {
      position: relative;
      width: 0;
      height: 0;
      border-left: 170px solid transparent;
      border-right: 170px solid transparent;
      border-bottom: 300px solid green;
    }

    .trunk {
      position: absolute;
      bottom: -80px;
      left: -40px;
      width: 80px;
      height: 80px;
      background: saddlebrown;
      border-radius: 6px;
    }

    .star {
      position: absolute;
      top: -140px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 120px;
      background: #ffd86b;
      clip-path: polygon(
        50% 0%, 61% 35%, 98% 35%, 
        68% 57%, 79% 91%, 50% 72%, 
        21% 91%, 32% 57%, 2% 35%, 
        39% 35%
      );
      box-shadow: 0 0 30px gold, 0 0 60px rgba(255,216,107,0.6);
      animation: twinkle 2s infinite;
    }

    @keyframes twinkle {
      50% { filter: brightness(1.3); }
    }

    .gift-left, .gift-right {
      position: absolute;
      bottom: -20px;
      width: 130px;
      height: 130px;
      border: 6px solid gold;
      border-radius: 10px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    }

    .gift-left {
      left: -220px;
      background: linear-gradient(135deg, #b22222, #ff4d4d);
    }

    .gift-right {
      left: 220px;
      background: linear-gradient(135deg, #0f58c2, #3da5ff);
    }

    .gift-left::before, .gift-left::after,
    .gift-right::before, .gift-right::after {
      content:""; position:absolute; background: gold;
    }

    .gift-left::before, .gift-right::before {
      width: 12px; height: 100%; left: calc(50% - 6px); top: 0;
    }

    .gift-left::after, .gift-right::after {
      height: 12px; width: 100%; left: 0; top: calc(50% - 6px);
    }
  </style>
</head>
<body>
  <div class="tree">
    <div class="star"></div>
    <div class="trunk"></div>
    <div class="gift-left"></div>
    <div class="gift-right"></div>
  </div>
</body>
</html>

