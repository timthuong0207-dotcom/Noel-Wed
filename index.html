<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Gi√°ng Sinh ·∫•m √°p üéÑ‚ùÑÔ∏è</title>
  <style>
    /* N·ªÅn: tr√™n nh·∫°t d·∫ßn, d∆∞·ªõi ƒë·ªè ƒë·∫≠m */
    :root {
      --bg-top: #ff9aa2;  /* ƒë·ªè h·ªìng nh·∫°t */
      --bg-mid: #ff5c73;  /* ƒë·ªè v·ª´a */
      --bg-bottom: #b31217; /* ƒë·ªè ƒë·∫≠m */
      --green: #1aa34a;
      --brown: #8b5a2b;
      --gold: #ffd86b;
      --blue: #0f58c2;
      --red: #b22222;
    }

    html, body {
      margin: 0;
      height: 100%;
    }

    body {
      background: linear-gradient(to bottom, var(--bg-top), var(--bg-mid) 35%, var(--bg-bottom) 100%);
      color: #fff;
      font-family: system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow: hidden;
    }

    /* √Ånh s√°ng ch·∫°y qua: tr√™n ph·∫£i qua tr√°i, d∆∞·ªõi tr√°i qua ph·∫£i */
    .light-sweep {
      position: fixed;
      pointer-events: none;
      inset: 0;
    }
    .sweep-top, .sweep-bottom {
      position: absolute;
      height: 180px;
      left: -40%;
      right: -40%;
      filter: blur(10px);
      opacity: 0.25;
      background: linear-gradient(to left,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.7) 40%,
        rgba(255,255,255,0) 80%);
    }
    .sweep-top {
      top: 8%;
      transform: rotate(-2deg);
      animation: sweepLeft 7s linear infinite;
    }
    .sweep-bottom {
      bottom: 8%;
      transform: rotate(2deg);
      animation: sweepRight 7s linear infinite;
    }
    @keyframes sweepLeft {
      0%   { transform: translateX(40%) rotate(-2deg); }
      50%  { transform: translateX(-40%) rotate(-2deg); }
      100% { transform: translateX(40%) rotate(-2deg); }
    }
    @keyframes sweepRight {
      0%   { transform: translateX(-40%) rotate(2deg); }
      50%  { transform: translateX(40%) rotate(2deg); }
      100% { transform: translateX(-40%) rotate(2deg); }
    }

    /* Ki·ªÉu ch·ªØ d·∫°ng ‚Äúdigital‚Äù */
    .digital {
      font-weight: 700;
      letter-spacing: 1.5px;
      text-transform: uppercase;
      text-shadow:
        0 1px 0 rgba(255,255,255,0.3),
        0 0 6px rgba(255,255,255,0.25),
        0 0 12px rgba(255,255,255,0.2);
    }

    h1 {
      margin: 18px 0 8px;
    }

    /* Tuy·∫øt r∆°i: layer tuy·∫øt + layer bƒÉng */
    .snow, .ice {
      position: fixed;
      inset: 0;
      pointer-events: none;
    }
    .flake, .shard {
      position: absolute;
      top: -10px;
      will-change: transform;
    }
    .flake {
      width: 6px; height: 6px; border-radius: 50%;
      background: rgba(255,255,255,0.9);
      box-shadow: 0 0 6px rgba(255,255,255,0.8);
      animation: fallSnow var(--dur) linear var(--delay) infinite;
    }
    .shard {
      width: 0; height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 10px solid rgba(176,224,230,0.85); /* m√†u bƒÉng xanh nh·∫°t */
      filter: drop-shadow(0 0 6px rgba(176,224,230,0.65));
      animation: fallIce var(--dur) linear var(--delay) infinite;
    }
    @keyframes fallSnow {
      to { transform: translateY(110vh) translateX(var(--drift)); }
    }
    @keyframes fallIce {
      to { transform: translateY(110vh) translateX(calc(var(--drift) * 0.6)) rotate(18deg); }
    }

    /* S√¢n kh·∫•u c√¢y th√¥ng */
    .stage {
      position: relative;
      width: 800px;
      height: 520px;
      margin-top: 6px;
    }

    /* C√¢y th√¥ng b·∫±ng ch·∫•m xanh l√°, th√¢n n√¢u */
    .tree { position: absolute; left: 50%; bottom: 120px; transform: translateX(-50%); width: 0; height: 0; }
    .dot {
      position: absolute;
      width: 7px; height: 7px; border-radius: 50%;
      opacity: 0; transform: scale(0.2);
      animation: dotAppear 0.45s forwards ease-out;
    }
    @keyframes dotAppear { to { opacity: 1; transform: scale(1); } }

    /* Sao tr√™n ƒë·ªânh */
    .star {
      position: absolute;
      left: 50%; top: -130px; transform: translateX(-50%);
      width: 110px; height: 110px;
      background: var(--gold);
      clip-path: polygon(50% 0%,61% 35%,98% 35%,68% 57%,79% 91%,50% 72%,21% 91%,32% 57%,2% 35%,39% 35%);
      box-shadow:
        0 0 24px 8px rgba(255,216,107,0.9),
        0 0 60px 22px rgba(255,216,107,0.45);
      opacity: 0; transform-origin: center;
    }
    .star.fly {
      animation: starFly 1.8s ease-out forwards;
    }
    @keyframes starFly {
      from { transform: translate(-50%,-40vh) scale(0.7); opacity: 0; }
      to   { transform: translate(-50%,0) scale(1);   opacity: 1; }
    }

    /* Hai h·ªôp qu√† to: xanh d∆∞∆°ng v√† ƒë·ªè, ƒë·ª©ng c√¢n hai b√™n g·ªëc c√¢y */
    .gift {
      position: absolute; bottom: -30px;
      width: 140px; height: 140px;
      border: 6px solid var(--gold);
      border-radius: 12px;
      box-shadow: 0 8px 22px rgba(0,0,0,0.38);
      cursor: pointer;
      transition: transform .25s;
    }
    .gift.left  { left: -250px; background: linear-gradient(135deg, var(--red), #ff4d4d); }
    .gift.right { left:  250px; background: linear-gradient(135deg, var(--blue), #3da5ff); }
    .gift:hover { transform: translateY(-6px) scale(1.05); }
    .gift::before, .gift::after { content:""; position:absolute; background: var(--gold); }
    .gift::before { width: 12px; height:100%; left: calc(50% - 6px); top:0; }
    .gift::after  { height: 12px; width:100%; left:0; top: calc(50% - 6px); }

    /* C√¢u h·ªèi + n√∫t */
    .panel {
      position: relative;
      margin-top: 10px;
      display: none;
      text-align: center;
    }
    .panel p { margin: 10px 0; }
    .btn {
      display: inline-block;
      padding: 10px 16px;
      margin: 6px;
      border: none;
      border-radius: 8px;
      font-weight: 700;
      cursor: pointer;
      background: var(--gold);
      color: #5a3a00;
      box-shadow: 0 4px 10px rgba(0,0,0,0.25);
      transition: transform .15s, filter .2s;
    }
    .btn:hover { filter: brightness(1.15); transform: translateY(-2px); }

    /* Hi·ªáu ·ª©ng ‚Äútuy·∫øt ph·ªß l√™n n√∫t‚Äù (sau khi b·∫•m C√≥) */
    .btn.snowy {
      position: relative;
      overflow: hidden;
    }
    .btn.snowy::after {
      content:"";
      position:absolute; left:0; top:-6px; right:0; height: 14px;
      background: linear-gradient(to bottom, #fff, rgba(255,255,255,0.5));
      border-radius: 6px 6px 0 0;
      filter: drop-shadow(0 2px 3px rgba(255,255,255,0.6));
      animation: settleSnow .6s ease-out forwards;
    }
    @keyframes settleSnow {
      from { transform: translateY(-12px); opacity: 0; }
      to   { transform: translateY(0);     opacity: 1; }
    }

    /* D√≤ng nh·∫Øc ‚ÄúNh·∫≠n qu√† ƒëi‚Äù m·ªù d·∫ßn (khi b·∫•m Kh√¥ng) */
    .hint {
      margin-top: 8px;
      height: 24px;
      text-align: center;
      opacity: 0;
      transition: opacity .5s;
    }
    .hint.show { opacity: 1; }
    .btn.no-shrink {
      transform-origin: center;
    }

    /* Ch·ªçn tr√°i/ph·∫£i */
    .panel-choose { display: none; margin-top: 6px; text-align:center; }

    /* Thi·ªáp v√† gi·∫•y ƒëi·ªÅu ∆∞·ªõc */
    .card {
      display: none;
      width: 80%;
      max-width: 640px;
      margin-top: 12px;
      background: #fff;
      color: #222;
      padding: 18px;
      border-radius: 12px;
      box-shadow: 0 12px 28px rgba(0,0,0,0.3);
    }
    .card h3 { margin: 0 0 8px; }
    .paper {
      display: none;
      width: 80%;
      max-width: 520px;
      margin-top: 12px;
      background:
        linear-gradient(135deg, #fffaf0 0%, #fff5e6 100%),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"></svg>');
      color: #2b2b2b;
      padding: 18px;
      border-radius: 14px;
      box-shadow: 0 12px 28px rgba(0,0,0,0.25);
      border: 8px solid #e74c3c;
    }
    .paper h3 { margin: 0 0 10px; }
    .paper input {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ddd;
      font-size: 16px;
    }
    .paper .btn { margin-top: 10px; }

    /* D√≤ng ‚Äúdigital‚Äù l·ªùi th√¨ th·∫ßm */
    #type {
      margin-top: 8px;
      min-height: 24px;
    }

    /* N√∫t C·∫£m ∆†n */
    .thanks {
      display: none;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <div class="light-sweep">
    <div class="sweep-top"></div>
    <div class="sweep-bottom"></div>
  </div>

  <h1 class="digital">Gi√°ng Sinh ·∫•m √°p üéÑ‚ùÑÔ∏è</h1>
  <div id="type" class="digital"></div>

  <div class="stage">
    <!-- C√¢y th√¥ng b·∫±ng ch·∫•m -->
    <div id="tree" class="tree">
      <div id="star" class="star"></div>
      <!-- Hai h·ªôp qu√† l·ªõn -->
      <div id="giftLeft" class="gift left" title="Qu√† tr√°i"></div>
      <div id="giftRight" class="gift right" title="Qu√† ph·∫£i"></div>
    </div>
  </div>

  <!-- C√¢u h·ªèi -->
  <div id="panelQ" class="panel">
    <p class="digital">Mu·ªën nh·∫≠n qu√† hong?</p>
    <button id="btnYes" class="btn">C√≥</button>
    <button id="btnNo" class="btn no-shrink">Kh√¥ng</button>
    <div id="hint" class="hint digital">Nh·∫≠n qu√† ƒëi‚Ä¶</div>
  </div>

  <!-- Ch·ªçn tr√°i/ph·∫£i -->
  <div id="panelChoose" class="panel-choose">
    <p class="digital">Ch·ªçn qu√†: tr√°i hay ph·∫£i?</p>
    <button id="chooseLeft" class="btn">Tr√°i</button>
    <button id="chooseRight" class="btn">Ph·∫£i</button>
  </div>

  <!-- Gi·∫•y phong c√°ch Gi√°ng sinh ƒë·ªÉ ghi ƒëi·ªÅu ∆∞·ªõc -->
  <div id="paper" class="paper">
    <h3>Gi·∫•y phong c√°ch Gi√°ng Sinh</h3>
    <p>Ghi ƒëi·ªÅu ∆∞·ªõc c·ªßa b·∫°n:</p>
    <input id="wish" placeholder="ƒêi·ªÅu ∆∞·ªõc ƒë√™m Noel‚Ä¶" />
    <button id="sendWish" class="btn">G·ª≠i ƒëi·ªÅu ∆∞·ªõc</button>
  </div>

  <!-- Thi·ªáp l·ªùi ch√∫c n·∫øu ch·ªçn qu√† ph·∫£i -->
  <div id="cardRight" class="card">
    <h3>üéÅ Thi·ªáp Gi√°ng Sinh</h3>
    <p>Ch√∫c b·∫°n ƒë√™m Noel ·∫•m √°p, vui v·∫ª Gi√°ng Sinh an l√†nhhhhh</p>
  </div>

  <!-- Thi·ªáp t·ª´ √îng Gi√† Noel: tr√≠ch ƒëi·ªÅu ∆∞·ªõc -->
  <div id="cardWish" class="card">
    <h3>üéÖ T·ª´ √îng Gi√† Noel</h3>
    <blockquote id="wishText" style="margin:8px 0; font-style:italic;"></blockquote>
    <p>Th√¨ ra ƒë√¢y l√† ƒëi·ªÅu ∆∞·ªõc c·ªßa con. M·∫∑c d√π ta kh√¥ng gi√∫p ƒë∆∞·ª£c,
    nh∆∞ng ta ch√∫c ƒëi·ªÅu ∆∞·ªõc c·ªßa con s·∫Ω th√†nh s·ª± th·∫≠t.</p>
  </div>

  <!-- N√∫t C·∫£m ∆†n -->
  <div class="thanks">
    <button id="btnThanks" class="btn">C·∫£m ∆†n</button>
  </div>

  <!-- Tuy·∫øt v√† bƒÉng -->
  <div class="snow" id="snow"></div>
  <div class="ice"  id="ice"></div>

  <script>
    // T·∫°o tuy·∫øt
    const snow = document.getElementById('snow');
    for(let i=0;i<90;i++){
      const f = document.createElement('div');
      f.className = 'flake';
      f.style.left = Math.random()*100 + 'vw';
      f.style.setProperty('--dur', (5 + Math.random()*6) + 's');
      f.style.setProperty('--delay', (Math.random()*3) + 's');
      f.style.setProperty('--drift', (Math.random()*70 - 35) + 'px');
      snow.appendChild(f);
    }
    // T·∫°o bƒÉng (m·∫£nh tinh th·ªÉ)
    const ice = document.getElementById('ice');
    for(let i=0;i<60;i++){
      const s = document.createElement('div');
      s.className = 'shard';
      s.style.left = Math.random()*100 + 'vw';
      s.style.setProperty('--dur', (6 + Math.random()*6) + 's');
      s.style.setProperty('--delay', (Math.random()*3) + 's');
      s.style.setProperty('--drift', (Math.random()*70 - 35) + 'px');
      ice.appendChild(s);
    }

    // D·ª±ng c√¢y th√¥ng b·∫±ng ch·∫•m t·ª´ d∆∞·ªõi l√™n
    const tree = document.getElementById('tree');
    const star = document.getElementById('star');
    let tDelay = 0;
    const height = 300;            // chi·ªÅu cao t√°n l√°
    const baseWidth = 300;         // ƒë·ªô r·ªông ƒë√°y
    const stepY = 18;              // kho·∫£ng c√°ch h√†ng ch·∫•m
    for(let y=0; y<=height; y+=stepY){
      const frac = 1 - (y / height);
      const width = baseWidth * frac;
      const dots = Math.max(1, Math.floor(width / 14));
      for(let i=0; i<dots; i++){
        const d = document.createElement('div');
        d.className = 'dot';
        d.style.background = 'radial-gradient(circle, #1fd05e 40%, #1aa34a 70%, transparent 100%)';
        d.style.boxShadow = '0 0 6px 2px rgba(31,208,94,0.45)';
        const x = (-width/2) + (dots === 1 ? 0 : (i * (width / (dots-1))));
        d.style.left = 'calc(50% + ' + x + 'px)';
        d.style.bottom = (y) + 'px';
        d.style.animationDelay = (tDelay * 0.08) + 's';
        tree.appendChild(d);
      }
      tDelay++;
    }
    // Th√¢n c√¢y b·∫±ng ch·∫•m n√¢u
    const trunkH = 80, trunkW = 70, gap = 10;
    for(let ty=0; ty<=trunkH; ty+=gap){
      for(let tx=-trunkW/2; tx<=trunkW/2; tx+=gap){
        const d = document.createElement('div');
        d.className = 'dot';
        d.style.background = 'radial-gradient(circle, #9c6b37 35%, #8b5a2b 70%, transparent 100%)';
        d.style.boxShadow = '0 0 5px 2px rgba(139,90,43,0.35)';
        d.style.left = 'calc(50% + ' + tx + 'px)';
        d.style.bottom = (-trunkH + ty) + 'px';
        d.style.animationDelay = (tDelay * 0.08) + 's';
        tree.appendChild(d);
      }
      tDelay++;
    }
    // Sao bay v√†o ƒë·ªânh sau khi c√¢y d·ª±ng xong
    setTimeout(()=> star.classList.add('fly'), tDelay*80 + 400);

    // Sau sao bay, hi·ªán c√¢u h·ªèi
    const panelQ = document.getElementById('panelQ');
    setTimeout(()=> panelQ.style.display = 'block', tDelay*80 + 2000);

    // Logic n√∫t C√≥/Kh√¥ng
    const btnYes = document.getElementById('btnYes');
    const btnNo  = document.getElementById('btnNo');
    const hint   = document.getElementById('hint');
    const panelChoose = document.getElementById('panelChoose');

    btnYes.onclick = () => {
      // hi·ªáu ·ª©ng: v√†i h·ªôp qu√† nh·ªè vƒÉng ra r·ªìi bi·∫øn m·∫•t
      spawnMiniGifts();
      // tuy·∫øt ph·ªß l√™n n√∫t
      btnYes.classList.add('snowy');
      // hi·ªán panel ch·ªçn tr√°i/ph·∫£i
      panelChoose.style.display = 'block';
    };

    let noClicks = 0;
    btnNo.onclick = () => {
      // hi·ªán d√≤ng "Nh·∫≠n qu√† ƒëi" r·ªìi m·ªù d·∫ßn
      hint.textContent = 'Nh·∫≠n qu√† ƒëi‚Ä¶';
      hint.classList.add('show');
      setTimeout(()=> hint.classList.remove('show'), 1200);
      // n√∫t Kh√¥ng c√†ng b·∫•m c√†ng nh·ªè
      noClicks++;
      const scale = Math.max(0.5, 1 - noClicks*0.08);
      btnNo.style.transform = 'scale(' + scale + ')';
    };

    function spawnMiniGifts(){
      const N = 8 + Math.floor(Math.random()*5);
      for(let i=0;i<N;i++){
        const mg = document.createElement('div');
        mg.style.position = 'fixed';
        mg.style.left = (window.innerWidth/2) + 'px';
        mg.style.top  = (window.innerHeight/2 - 40) + 'px';
        mg.style.width = '16px'; mg.style.height = '16px';
        mg.style.border = '3px solid ' + (i%2 ? '#ffd86b':'#ffe08a');
        mg.style.borderRadius = '4px';
        mg.style.background = i%2 ? 'linear-gradient(135deg,#b22222,#ff4d4d)' : 'linear-gradient(135deg,#0f58c2,#3da5ff)';
        mg.style.zIndex = 10;
        document.body.appendChild(mg);
        const dx = (Math.random()*2-1) * 220;
        const dy = (Math.random()*2-1) * 160 - 40;
        const rot = (Math.random()*2-1) * 60;
        mg.animate([
          { transform: 'translate(0,0) rotate(0deg)', opacity: 1 },
          { transform: 'translate('+dx+'px,'+dy+'px) rotate('+rot+'deg)', opacity: 0 }
        ], { duration: 900 + Math.random()*500, easing: 'ease-out', fill: 'forwards' });
        setTimeout(()=> mg.remove(), 1500);
      }
    }

    // Ch·ªçn qu√† tr√°i/ph·∫£i
    const giftLeft  = document.getElementById('giftLeft');
    const giftRight = document.getElementById('giftRight');
    const chooseLeft  = document.getElementById('chooseLeft');
    const chooseRight = document.getElementById('chooseRight');

    const paper     = document.getElementById('paper');
    const cardRight = document.getElementById('cardRight');
    const cardWish  = document.getElementById('cardWish');
    const wishInput = document.getElementById('wish');
    const sendWish  = document.getElementById('sendWish');
    const wishText  = document.getElementById('wishText');
    const thanksBox = document.querySelector('.thanks');
    const btnThanks = document.getElementById('btnThanks');

    // Cho ph√©p b·∫•m tr·ª±c ti·∫øp h·ªôp qu√† ho·∫∑c n√∫t l·ª±a ch·ªçn
    giftRight.onclick = chooseRight.onclick = ()=>{
      cardWish.style.display = 'none';
      paper.style.display = 'none';
      cardRight.style.display = 'block';
      thanksBox.style.display = 'block';
    };
    giftLeft.onclick = chooseLeft.onclick = ()=>{
      cardRight.style.display = 'none';
      cardWish.style.display = 'none';
      paper.style.display = 'block';
    };

    // G·ª≠i ƒëi·ªÅu ∆∞·ªõc -> hi·ªán thi·ªáp t·ª´ √îng Gi√† Noel
    sendWish.onclick = ()=>{
      const wish = (wishInput.value || '').trim();
      if(!wish) return;
      paper.style.display = 'none';
      // G·∫Øn l·ªùi th√¨ th·∫ßm ki·ªÉu digital
      typewriter(document.getElementById('type'), 'ƒêi·ªÅu ∆∞·ªõc ƒë√£ ƒë∆∞·ª£c ghi nh·∫≠n.', 42);
      wishText.textContent = '‚Äú' + wish + '‚Äù';
      cardWish.style.display = 'block';
      thanksBox.style.display = 'block';
    };

    // N√∫t C·∫£m ∆†n: ·∫©n h·∫øt tr·ª´ c√¢y th√¥ng + sao + √°nh s√°ng + tuy·∫øt
    btnThanks.onclick = ()=>{
      panelQ.style.display = 'none';
      panelChoose.style.display = 'none';
      cardRight.style.display = 'none';
      cardWish.style.display = 'none';
      paper.style.display = 'none';
      thanksBox.style.display = 'none';
      document.getElementById('type').textContent = '';
    };

    // Typewriter cho d√≤ng digital
    function typewriter(el, text, speed=40) {
      let i=0;
      const tick = () => {
        el.textContent = text.slice(0, i++);
        if (i <= text.length) setTimeout(tick, speed);
      };
      tick();
    }

    // L·ªùi th√¨ th·∫ßm nh·∫π sau khi c√¢y ho√†n t·∫•t
    setTimeout(()=> typewriter(document.getElementById('type'),
      'M√¨nh d√πng nh·ªØng thu·∫≠t to√°n ‚Äúv√¥ c·∫£m‚Äù ƒë·ªÉ g·ª≠i h∆°i ·∫•m th·∫≠t l√≤ng cho b·∫°n.',
      42), tDelay*80 + 2800);
  </script>
</body>
</html>
